---
- summary: |
    Проверка возможности регистрации нового пользователя
  requirement: |
    Пользователь должен иметь возможность зарегистрироваться с помощью электронной почты
  prerequisites: |
    Открыта страница регистрации (https://codebattle.hexlet.io/users/new)
  test-data: |
    empty
  steps:
    - Вводим никнейм в поле Nickname
    - Вводим электронную почту в поле Email
    - Вводим пароль в поле Password
    - Вводим пароль в поле Password Confirmation
    - Нажимаем кнопку Submit
  expected-result: |
    Пользователь успешно зарегистрирован

- summary: |
    Проверка регистрации пользователя с никнеймом на кириллице
  requirement: |
    При регистрации данные должны быть указаны латиницей
  prerequisites: |
    Открыта страница регистрации (https://codebattle.hexlet.io/users/new)
  test-data: |
    empty
  steps:
    - Вводим никнейм в поле Nickname на кириллице
    - Вводим электронную почту в поле Email
    - Вводим пароль в поле Password
    - Вводим пароль в поле Password Confirmation
    - Нажимаем кнопку Submit
  expected-result: |
    Регистрация неуспешна: ошибка в поле ввода логина

- summary: |
    Проверка сообщения при вводе невалидного логина при регистрации
  requirement: |
    При попытке ввода некорректного никнейма должно появляться правильное и понятное пользователю сообщение об ошибке
  prerequisites: |
    Открыта страница регистрации (https://codebattle.hexlet.io/users/new)
  test-data: |
    empty
  steps:
    - Вводим никнейм в поле Nickname, в котором первый символ — буква латинского алфавита, а остальные символы — буквы кириллицы
  expected-result: |
    Поле подсвечено красным с требованиями к валидному логину

- summary: |
    Проверка валидации формы регистрации с никнеймом короче 3 символов
  requirement: |
    При регистрации длина никнейма должна быть от 3 до 16 символов
  prerequisites: |
    Открыта страница регистрации (https://codebattle.hexlet.io/users/new)
  test-data: |
    empty
  steps:
    - Вводим в поле Nickname никнейм длиной два символа
    - Вводим электронную почту в поле Email
    - Вводим пароль в поле Password
    - Вводим пароль в поле Password Confirmation
    - Нажимаем кнопку Submit
  expected-result: |
    Выводится сообщение с требованием использовать логин длиной от 3 до 16 символов, поле ввода подсвечено красным

- summary: |
    Проверка валидации формы регистрации с пустым полем email
  requirement: |
    При регистрации должен быть указан адрес электронной почты
  prerequisites: |
    Открыта страница регистрации (https://codebattle.hexlet.io/users/new)
  test-data: |
    empty
  steps:
    - Вводим в поле Nickname никнейм длиной два символа
    - Оставляем поле Email пустым
    - Вводим пароль в поле Password
    - Вводим пароль в поле Password Confirmation
    - Нажимаем кнопку Submit
  expected-result: |
    Выводится сообщение "Email required", поле ввода подсвечено красным

- summary: |
    Проверка валидации формы регистрации с недопустимым адресом электронной почты
  requirement: |
    При регистрации должен быть указан существующий адрес электронной почты
  prerequisites: |
    Открыта страница регистрации (https://codebattle.hexlet.io/users/new)
  test-data: |
    empty
  steps:
    - Вводим в поле Nickname никнейм длиной два символа
    - Вводим в поле Email символы на кириллице
    - Вводим пароль в поле Password
    - Вводим пароль в поле Password Confirmation
    - Нажимаем кнопку Submit
  expected-result: |
    Выводится сообщение "Invalid email", поле ввода подсвечено красным

- summary: |
    Проверка валидации формы регистрации с недопустимой длиной пароля
  requirement: |
    При регистрации должен быть указан пароль длиной от 6 до 16 символов
  prerequisites: |
    Открыта страница регистрации (https://codebattle.hexlet.io/users/new)
  test-data: |
    empty
  steps:
    - Вводим в поле Nickname никнейм длиной два символа
    - Вводим в поле Email символы на кириллице
    - Вводим в поле Password три любых символа
    - Вводим пароль в поле Password Confirmation
    - Нажимаем кнопку Submit
  expected-result: |
    Выводится сообщение "Should be from 6 to 16 characters", поле ввода подсвечено красным

- summary: |
    Проверка валидации формы регистрации на совпадение пароля и его подтверждения
  requirement: |
    При регистрации пароль должен совпадать со своим подтверждением
  prerequisites: |
    Открыта страница регистрации (https://codebattle.hexlet.io/users/new)
  test-data: |
    empty
  steps:
    - Вводим в поле Nickname никнейм длиной два символа
    - Вводим в поле Email символы на кириллице
    - Вводим в поле Password комбинацию символов
    - Вводим в поле Password Confirmation другую комбинацию символов
    - Нажимаем кнопку Submit
  expected-result: |
    Выводится сообщение "Passwords must match", поле ввода подсвечено красным

- summary: |
    Проверка валидации формы регистрации на введение подтверждения пароля
  requirement: |
    При регистрации нужно подтверждать введенный пароль
  prerequisites: |
    Открыта страница регистрации (https://codebattle.hexlet.io/users/new)
  test-data: |
    empty
  steps:
    - Вводим в поле Nickname никнейм длиной два символа
    - Вводим в поле Email символы на кириллице
    - Вводим в поле Password комбинацию символов
    - Нажимаем кнопку Submit
  expected-result: |
    Выводится сообщение "Confirmation required", поле ввода подсвечено красным

- summary: |
    Проверка успешной авторизации через GitHub
  requirement: |
    Пользователь должен иметь возможность войти в аккаунт, используя свой аккаунт на GitHub
  prerequisites: |
    Открыта страница авторизации, в браузере войдено в аккаунт на GitHub
  test-data: |
    empty
  steps:
    - Нажимаем кнопку Sign in with GitHub
  expected-result: |
    Успешная авторизация, пользователь залогинен на codebattle

- summary: |
    Проверка успешной авторизации через Discord
  requirement: |
    Пользователь должен иметь возможность войти в аккаунт, используя свой аккаунт Discord
  prerequisites: |
    Открыта страница авторизации, в браузере войдено в аккаунт в Discord
  test-data: |
    empty
  steps:
    - Нажимаем кнопку Sign in with Discord
  expected-result: |
    Успешная авторизация, пользователь залогинен на codebattle

- summary: |
    Проверка успешной авторизации с помощью email и пароля
  requirement: |
    Пользователь должен иметь возможность войти в аккаунт, используя адрес электронной почты и пароль
  prerequisites: |
    Открыта страница авторизации
  test-data: |
    email: test-user@gmail.com, password: q1w2e3r4
  steps:
    - Вводим электронную почту в поле Email
    - Вводим пароль в поле Password
    - Нажимаем кнопку Submit
  expected-result: |
    Успешная авторизация, пользователь залогинен на codebattle

- summary: |
    Проверка авторизации незарегистрированного пользователя
  requirement: |
    Авторизоваться могут только ранее зарегистрированные пользователи
  prerequisites: |
    Открыта страница авторизации
  test-data: |
    empty
  steps:
    - Вводим электронную почту в поле Email
    - Вводим пароль в поле Password
    - Нажимаем кнопку Submit
  expected-result: |
    Авторизация не пройдена, открыта страница авторизации, появилось предупреждение: "EMAIL_NOT_FOUND"

- summary: |
    Проверка возможности выйти из аккаунта
  requirement: |
    Пользователи должны иметь возможность выйти из аккаунта
  prerequisites: |
    Открыта страница лобби, пользователь залогинен
  test-data: |
    empty
  steps:
    - Нажимаем на логин в правом верхнем углу
    - В выпадающем меню нажать на кнопку Sign Out
  expected-result: |
    Открывается главная страница https://codebattle.hexlet.io/, есть кнопки Sign In и Sign Up

- summary: |
    Проверка возможности создать игру с ботом
  requirement: |
    Залогиненые пользователи должны иметь возможность создать игру с ботом
  prerequisites: |
    Открыта страница лобби, пользователь залогинен
  test-data: |
    empty
  steps:
    - Нажимаем на кнопку Create a game
    - Нажимаем на кнопку Create battle
  expected-result: |
    Игра с ботом успешно создана

- summary: |
    Проверка возможности создать игру с другом
  requirement: |
    Залогиненые пользователи должны иметь возможность создать игру с другом
  prerequisites: |
    Открыта страница лобби, пользователь залогинен
  test-data: |
    email2: test-user2@gmail.com, password2: 1q2w3e4r, nickname: user1
  steps:
    - Нажимаем на кнопку Create a game
    - В строке Game Type нажимаем на кнопку With a friend
    - В строке Choose opponent нажать на выпадающий список
    - Ввести никнейм друга
    - Нажимаем на кнопку Create invite
    - Открыть в другом браузере страницу https://codebattle.hexlet.io/
    - Нажать на кнопку Sign in
    - Ввести тестовые данные второго пользователя
    - Нажать на картинку с мечами (invites)
    - Нажать на Accept
  expected-result: |
    Игра с другом успешно создана

- summary: |
    Проверка возможности присоединиться к игре по приглашению другого пользователя
  requirement: |
    Пользователь должен иметь возможность присоединиться к игре, созданной другим пользователем
  prerequisites: |
    Открыта страница лобби, пользователь залогинен
  test-data: |
    email2: test-user2@gmail.com, password2: 1q2w3e4r
  steps:
    - Нажимаем на кнопку Create a game
    - В строке Game Type нажимаем на кнопку With a friend
    - В строке Choose opponent нажать на выпадающий список
    - Ввести никнейм друга
    - Нажимаем на кнопку Create invite
    - Открыть в другом браузере страницу https://codebattle.hexlet.io/
    - Нажать на кнопку Sign in
    - Ввести тестовые данные второго пользователя
    - Нажать на картинку с мечами (invites)
    - Нажать на Accept
  expected-result: |
    Игра по приглашению успешно отображается

- summary: |
    Проверка возможности сдаться (прекратить игру)
  requirement: |
    Пользователь должен иметь возможность сдаться (завершить игру поражением)
  prerequisites: |
    Пользователь в активной игре
  test-data: |
    empty
  steps:
    - Нажать на красный флажок (кнопка Give Up)
    - В открывшемся всплывающем окне нажать на кнопку Give Up
    - В открывшемся вслывающем окне с предупреждением о проигрыше нажать на кнопку I'll be back.
  expected-result: |
    Ппользователь проиграл, нет возможности продолжить игру

- summary: |
    Проверка выхода из активной игры
  requirement: |
    Пользователь должен иметь возможность покинуть комнату игры и выйти в лобби
  prerequisites: |
    Пользователь в активной игре
  test-data: |
    empty
  steps:
    - Нажать на кнопку Back to home
  expected-result: |
    Пользователь попадает в лобби

- summary: |
    Проверка возможности переиграть игру с тем же соперником
  requirement: |
    Пользователь должен иметь возможность переиграть игру с тем же соперником после того, как сдался
  prerequisites: |
    Пользователь в активной игре
  test-data: |
    empty
  steps:
    - Нажать на красный флажок (кнопка Give Up)
    - В открывшемся всплывающем окне нажать на кнопку Give Up
    - В открывшемся вслывающем окне с предупреждением о проигрыше нажать на кнопку I'll be back.
    - Нажать на кнопку Rematch
  expected-result: |
    Переигровка успешно создана

- summary: |
    Проверка возможности сменить язык, на котором написано условие задачи в игре
  requirement: |
    Пользователь должен иметь возможность сменить язык, на котором написано задание
  prerequisites: |
    Открыта комната игры
  test-data: |
    empty
  steps:
    - Нажать на кнопку En
    - В открывшемся выпадающем списке выбрать Ru
  expected-result: |
    Условие задачи отображается на русском языке

- summary: |
    Проверка возможности сменить язык программирования для решения в ходе игры
  requirement: |
    Пользователь должен иметь возможность сменить язык программирования, на котором он будет писать решение задачи
  prerequisites: |
    Открыта комната игры
  test-data: |
    empty
  steps:
    - В выпадающем списке с выбором языка программирования нажать на название языка/стрелочку вниз
    - Нажать на нужный язык
  expected-result: |
    Язык программирования, на котором нужно писать решение, сменился на выбранный: в окошке с выбором языка отображается его название

- summary: |
    Проверка возможности создать игру с определенным уровнем сложности
  requirement: |
    Пользователь должен иметь возможность выбрать уровень сложности в игре
  prerequisites: |
    -
  test-data: |
    empty
  steps:
    - Нажать на кнопку Create a game
    - В открывшемся окне выбрать уровень сложности в строке Level
    - Нажамать на кнопку Create battle
  expected-result: |
    Открывается комната с созданной игрой с выбранным уровнем сложности

- summary: |
    Проверка возможности создать игру с решением определенной (выбранной) задачи
  requirement: |
    Пользователь должен иметь возможность выбрать задачу, которую он хочет решать в ходе игры
  prerequisites: |
    -
  test-data: |
    empty
  steps:
    - Нажать на кнопку Create a game
    - В открывшемся окне в строке/выпадающем списке Choose task by name or tags выбрать желаемую тему задачи
    - Нажамать на кнопку Create battle
  expected-result: |
    Открывается комната с созданной игрой с выбранной задачей

- summary: |
    Проверка возможности создать игру, которая подходит под выбранные теги
  requirement: |
    Пользователь должен иметь возможность выбрать теги для создаваемой игры
  prerequisites: |
    -
  test-data: |
    empty
  steps:
    - Нажать на кнопку Create a game
    - В открывшемся окне в строке/выпадающем списке Choose task by name or tags выбрать желаемые теги
    - Нажамать на кнопку Create battle
  expected-result: |
    Открывается комната с созданной игрой, где задача соответствует выбранным тегам

- summary: |
    Проверка возможности создать игру определенной продолжительности
  requirement: |
    Пользователь должен иметь возможность выбрать продолжительность создаваемой игры
  prerequisites: |
    -
  test-data: |
    empty
  steps:
    - Нажать на кнопку Create a game
    - В открывшемся окне в строке Time control выбрать нужное время, передвигая ползунок
    - Нажамать на кнопку Create battle
  expected-result: |
    Открывается комната с созданной игрой, продолжительность игры соответствует заданному времени

- summary: |
    Проверка возможности писать в чат во время игры в комнате
  requirement: |
    Пользователь должен иметь возможность общаться в чате с соперником во время игры
  prerequisites: |
    Открыта комната игры
  test-data: |
    empty
  steps:
    - Написать текст сообщения в окне чата
    - Нажать на кнопку Send
  expected-result: |
    Сообщение отображается в окне чата

- summary: |
    Проверка возможности отправить фидбек разработчикам из комнаты игры
  requirement: |
    Пользователь должен иметь возможность отправить сообщение через форму обратной связи
  prerequisites: |
    Открыта комната игры
  test-data: |
    empty
  steps:
    - Нажать на кнопку Send Feedback
    - В открывшемся окне выбрать тип сообщения, например, bug
    - Ввести текст сообщения в поле Message
    - Нажать на кнопку Send feedback
  expected-result: |
    Появляется сообщение "Feedback sent successfully.", во вкладке Network в DevTools отображается запрос feedback со статусом 201 created.

- summary: |
    Проверка возможности создать игру без регистрации
  requirement: |
    Пользователь должен иметь возможность создавать игру без регистрации в сервисе
  prerequisites: |
    Открыта страница https://codebattle.hexlet.io/, пользователь разлогинен
  test-data: |
    empty
  steps:
    - Нажать на кнопку Try simple battle
  expected-result: |
    Открывается комната созданной игры

- summary: |
    Проверка возможности присоединиться к игре, уже находясь в игре
  requirement: |
    Если пользователь является участником игры, он не может присоединиться к другой игре
  prerequisites: |
    Пользователь является участником игры, открыта страница лобби
  test-data: |
    empty
  steps:
    - Нажать на кнопку Fight
  expected-result: |
    Появляется сообщение об ошибке

- summary: |
    Проверка сообщения о невозможности присоединиться к игре для пользователя, который уже в активной игре
  requirement: |
    Пользователь должен получить понятное сообщение об ошибке при попытке присоединиться к новой игре в том случае, когда он является участником другой игры
  prerequisites: |
    Пользователь является участником игры, открыта страница лобби
  test-data: |
    empty
  steps:
    - Нажать на кнопку Fight
  expected-result: |
    Пользователь не присоединен в игре и видит понятную ошибку

- summary: |
    Проверка на переполнение вёрстки редактора кода в комнате игры при рематче в мобильной версии
  requirement: |
    Вёрстка меню редактора должна проходить проверку на переполнение в мобильной версии
  prerequisites: |
    Открыта комната игры
  test-data: |
    Длина имени пользователя составляет 16 символов (максимальная), ширина экрана меньше или равна 455 пикселей
  steps:
    - Открываем DevTools
    - Переходим в Toggle device toolbar
    - В dimensions выбираем Responsive
    - Задаем ширину 455 пикселей
  expected-result: |
    Контент не должен выходить за границы экрана
